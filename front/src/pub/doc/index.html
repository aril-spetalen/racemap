<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
      <title>Seilaskart</title>

      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin="">
      </script>

      <style>
form {
    /* Center the form on the page */
    margin: 0 auto;
    width: 600px;
    /* Form outline */
    padding: 1em;
    border: 1px solid #CCC;
    border-radius: 1em;
}

ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

form li + li {
    margin-top: 1em;
}

label {
    /* Uniform size & alignment */
    display: inline-block;
    width: 120;
    text-align: right;
}

#raceSearch, 
textarea {
    /* To make sure that all text fields have the same font settings
       By default, textareas have a monospace font */
    font: 1em sans-serif;

    /* Uniform text field size */
    width: 300px;
    box-sizing: border-box;

    /* Match form field borders */
    border: 1px solid #999;
}

#raceSearch:focus, 
textarea:focus {
    /* Additional highlight for focused elements */
    border-color: #000;
}

textarea {
    /* Align multiline text fields with their labels */
    vertical-align: top;

    /* Provide space to type some text */
    height: 5em;
}


#searchButton {
    /* Align buttons with the text fields */
    padding-left: 10px; /* same size as the label elements */
    /* This extra margin represent roughly the same space as the space
       between the labels and their text fields */
    margin-left: 9em;
    margin-top: 0.2em;
    width: 90;
}

#map {
    /* Center the map on the page */
    /* TODO: find out how to set width and height in a good way */
    margin: 0 auto;
    width: 100%;
    height: 400px;
    /* Outline */
    padding: 1em;
    border: 2px solid #CCC;
    border-radius: 1em;
}

      </style>

  </head>
  <body>

    <div id="map"></div>
    <script>
      // var map = L.map('map').setView([60.14, 10.25], 11);
      var map = L.map('map').setView([59.932867, 10.764526], 11);
      L.tileLayer('https://opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}', {
        attribution: '<a href="http://www.kartverket.no/">Kartverket</a>'
      }).addTo(map);
      var marker = L.marker([59.932867, 10.764526]).addTo(map);
    </script>

    <!-- form onSubmit="return query()" -->
    <form
      method = "POST"
      action="query_handler">
      <div>
        <label for="search">Søk etter regattaer</label>
        <input id="raceSearch" 
               type="search"
               name="querystring"
               value="færderseilasen">
      </div>
      <div>
        <input id="searchButton"
               type="submit" 
               onclick="verseChoose()"
               value="Søk" 
               accesskey="s">
      </div>
    </form>

       <script>
      var verseChoose = document.querySelector('.raceSearch');
            var poemDisplay = document.querySelector('pre');

                  verseChoose.onchange = function() {
                            var verse = verseChoose.value;
                                    updateDisplay(verse);
                                          };

      function updateDisplay(verse) {
                verse = verse.replace(" ", "");
                        verse = verse.toLowerCase();
                                var url = verse + '.txt';

          fetch(url).then(function(response) {
                      response.text().then(function(text) {
                                    poemDisplay.textContent = text;
                                              });
                              });


                };

      updateDisplay('Verse 1');
            verseChoose.value = 'Verse 1';



    </script>
  </body>
</html>

